<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="shortcut icon" href="../favicon.ico" type="image/x-icon">
  <link href="../css/prism.css" rel="stylesheet" />
  <link rel="stylesheet" type="text/css" href="../css/skeleton.css">
  <link rel="stylesheet" type="text/css" href="../css/common.css">
  <link rel="stylesheet" type="text/css" href="../css/markdown.css">
  <title>xkazer</title>
</head>
<body>
  <script src="../js/rain.js"></script>
  <canvas id="ad"></canvas>
  <div class="app">
    <header>
      <nav>
        <ul>
          <li><a href="../doc/me.html">关于</a></li>
          <li><a href="../doc/note.html">笔记</a></li>
          <li><a href="../doc/study.html">学习</a></li>
          <li><a href="../home.html">导航</a></li>
        </ul>
        <div class="title"><a href="../index.html">kazer</a></div>
      </nav>
    </header>
    <div class="markdown">
      <h2>JavaScript小技巧</h2>
<h5>通过条件判断向对象添加属性</h5>
<pre><code class="language-javascript">// 我们可以通过展开运算符向对象添加属性
const person = {
  id: 'ak001',
  name: 'ak47',
  ...(isValid &amp;&amp; {isActive: true}),
  ...((age &gt; 18 || isValid) &amp;&amp; {cart: 0})
}
</code></pre>
<h5>使用可选链(Optionalchaining)避免访问对象属性报错</h5>
<pre><code class="language-javascript">const product = {
 id: 'ak001',
 name: 'ak47'
}
console.log(product.sale.isSale); // throw error
console.log(product?.sale?.isSale); // undefined
</code></pre>
<h5>检查对象中是否存在某个属性</h5>
<pre><code class="language-javascript">const person = {
  id: 'ak001',
  name: 'ak47'
}
console.log('name' in person); // true
console.log('isActive' in person); // false
</code></pre>
<h5>巧用空值合并</h5>
<pre><code class="language-javascript">let data = undefined ?? 'noData;
console.log('data:', data); // data: noData

data = null ?? 'noData';
console.log('data:', data); // data: noData

data = 0 ?? null ?? 'noData';
console.log('data:', data); // data: 0

// 当我们根据变量自身判断时
data ??= 'noData';
console.log('data:', data); // data: noData
// 和或（||） 运算符的区别？
// 或运算符针对的是falsy类的值 (0,’ ’, null, undefined, false, NaN)
// 而空值合并仅针对null和undefined生效；
</code></pre>
<h5>监听DOM节点尺寸变更</h5>
<p>ResizeObserver接口可以监听到 Element 的内容区域或 SVGElement的边界框改变。内容区域则需要减去内边距 padding。
示例:</p>
<pre><code class="language-javascript">this.elementRo = new ResizeObserver((entries) =&gt; {
  this.onResize();
});
this.elementRo.observe(dom);
</code></pre>
<p>不需要时停止监听</p>
<pre><code class="language-javascript">this.elementRo.disconnect();
</code></pre>
<h5>监听DOM节点隐藏状态</h5>
<p>IntersectionObserver 接口提供了一种异步观察目标元素与其祖先元素或顶级文档视窗 (viewport) 交叉状态的方法.
示例:</p>
<pre><code class="language-javascript">this.elementIo = new IntersectionObserver((entries) =&gt; {
  this.onResize();
});
this.elementRo.observe(dom);
</code></pre>
<p>不需要时停止监听</p>
<pre><code class="language-javascript">this.elementRo.disconnect();
</code></pre>
<h5>获取对象类型</h5>
<pre><code class="language-javascript">Object.prototype.toString.call(obj);
</code></pre>

    </div>
  </div>
  <script src="../js/prism.js"></script>
</body>
</html>